
{% extends 'basereception.html' %}
{%block link%}
{% load static %}
    <link href="//fonts.googleapis.com/css?family=Spartan:400,500,600,700,900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'assets/css/style-starter.css' %}">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
{%endblock%}
{% block content%}
      <style>
            body {
                background-color:#1d1d1d !important;
                font-family: "Asap", sans-serif;
                color:#ffffff;
                font-size:16px;
            }
            
            #demo {
                height:100%;
                position:relative;
                overflow:hidden;
            }
            
            
            .green{
                background-color:#6fb936;
            }
                    .thumb{
                        margin-bottom: 30px;
                    }
                    
                    .page-top{
                        margin-top:85px;
                    }
            
                
            img.zoom {
                width: 100%;
                height: 200px;
                border-radius:5px;
                object-fit:cover;

            }
                    
            
            .transition {
                -webkit-transform: scale(1.2); 
                -moz-transform: scale(1.2);
                -o-transform: scale(1.2);
                transform: scale(1.2);
            }
                .modal-header {
                
                border-bottom: none;
            }
                .modal-title {
                    color:rgb(255, 255, 255);
                }
                .modal-footer{
                    display:none;  
                }
                .details{
                padding: 10px;
                color: white;
                }
            #roomno{
                color: white;
            }
            .seconddiv{
                margin-left: 5rem;
                color: white;
            }
            
        </style>
        <section id="main-content">
          <section class="wrapper">

            <section class="w3l-main-slider" id="home">
              <div class="container fluid">
                <div class="row ml-5 mt-5">
                  <h2 style="color: white;">{{rooms.category.category}}&nbsp;Room</h2>
                 <div class="col-md-6 mt-4">
                  <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src="http://ihg.scene7.com/is/image/ihg/even-hotels-eugene-5405616297-16x9" class="d-block w-100" alt="...">
                      </div>
                      {% for roompic in roompics %}
                      <div class="carousel-item">
                        <img src="{{roompic.ImageURL}}" class="d-block w-100" alt="...">
                      </div>
                      {% endfor %}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"  data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls"  data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>
                   <div class="details">
                     <label for="">Discription</label><br>
                     <p>{{rooms.description}}</p><br>
                     <label for="">Amenities</label><br>
                     {% for amenity in amenities %}
                       <p>{{amenity.amenities.amenities}}</p>
                     {%endfor%}
                   </div>
                 </div>
                 <div class="col-md-6 mt-4"  >
                   <div class="seconddiv">
                     <div>
                       <h4 style="color: white;">Price: ₹ {{rooms.price}}</h4>
                     </div>
                     <div>
                       <form>
                         <div class="form-group"><br>
                          <label for="exampleInputEmail1">name</label>
                          <input  id="guestname" type="tel" style="color: black;"  name="guestname" placeholder="Contacting no." >
                        </div>
                         <div class="form-group"><br>
                           <label for="exampleInputEmail1">Contact</label>
                           <input  id="phone" type="tel" style="color: black;"  name="phone" placeholder="Contacting no." >
                         </div>
                         <div class="form-group"><br>
                           <label for="exampleInputEmail1">Check-in</label>
                           <input  id="check_in" type="date" style="color: black;"   name="check_in" onchange="check_out_date()" placeholder="Check-in date" >
                         </div>
                         <div class="form-group">
                           <label for="exampleInputPassword1">Check-out</label>
                           <input type="date" id="check_out" style="color: black;"  name="check_out" onchange="change_room()" placeholder="check-out date" >
                         </div>
                         <div class="form-group">
                           <label for="">Rooms</label>
                           <select name="no_of_room" style="color: black;" id="room" onchange="price_change()"  >
                             <option   value="0">no_of_room</option>
                             <option value="1">1</option>
                             <option value="2">2</option>
                             <option value="3">3</option>
                             <option value="4">4</option>
                           </select>
                           <label for="">Guests</label>
                           <select name="no_of_guest" style="color: black;"  id="guest" >
                             <option value="0" selected>--no of guests--</option>
                           </select>
                         </div>
                         <div id="field">
                          <span id="total" style="font-size: 2em;"></span>
                          <span id="price" style="font-size: 3em; color: green;"></span>
                        </div>
                         <span id="span" style="color: red;"></span><br>
                         <input type="text" name="" id="totalprice" hidden >

                         <input type="button" style="color: black;"  value="Book Now" name="" class="btn btn-primary" id="button">
                       </form>
                     </div>
                   </div>
                   
                     
                   </div>
               </div>
               
            </section>
              

          </section>
        </section>
          <button onclick="topFunction()" id="movetop" title="Go to top">
             &#10548;
           </button>
           
           <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
           <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
           <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
           <script>
             function change_room(){
              $('#room').val('0')
             }
           </script>
           <script>
            function price_change(){
              var check_in = $('#check_in').val()
              var check_out = $('#check_out').val() 
              if( check_in == ''){
                $('#span').html('select Check-in date')
                $('#room').val('0')
              }else if(check_out==''||check_out==check_in){
                $('#span').html('select a valid check-out date')
                $('#room').val('0')
              } 
              var date1 = new Date(check_in)
              var date2 = new Date(check_out)
              const diffTime = Math.abs(date2 - date1);
              const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
              var no_room = $('#room').val()
              var price = '{{rooms.price}}'*no_room*diffDays
              $('#total').html('Total:₹')
              $('#price').html(price)
              $('#totalprice').val(price)
            }
          </script> 
           
           <script>
             
              $('#button').click(function(){
                var guest_name = $('#guestname').val()
                var phone = $('#phone').val()
                var check_in = $('#check_in').val()
                var check_out = $('#check_out').val()
                var room = $('#room').val()
                var guest = $('#guest').val()
                var price = $('#totalprice').val()
                var userdata = {
                  'csrfmiddlewaretoken':'{{csrf_token}}',
                  'guest_name':guest_name,
                  'phone':phone,
                  'check_in':check_in,
                  'check_out':check_out,
                  'no_of_room':room,  
                  'no_of_guest':guest,
                  'price':price
                }
                console.log(guest_name,phone,check_in,check_out,room,guest)
                if(guest_name.length<4){
                  $('#span').html('Enter the Guest name')
                }else if(isNaN(phone) || phone.length !=10){
                  $('#span').html('Enter the contacting number of guest')
                }else if(check_in == ''){
                  $('#span').html('select a check-in date')
                }else if(check_out==''){
                  $('#span').html('select a check-out date')
                }else if(check_out==check_in){
                  $('#span').html('select valid check-out date')
                }else if(room=='0'){
                  $('#span').html('select room')
                }else{
                  $.ajax({
                    url:'/reception/specificroom/{{rooms.id}}',
                    method:'POST',
                    data:userdata,
                    dataType:'json',
                    success:function(data){
                      if(data == 'true'){
                        window.location.replace('/reception/')
                      }
                      if(data == 'false'){
                        $('#span').html('room not available!')
                      }
                    }
                  })
                }
              })
                
            </script>
            
           <script>
             $(document).ready(function(){
               $('#room').change(function(){
                 var val = $(this).val()
                 if(val == '1'){
                   $('#guest').html('<option value="1" selected>1</option><option value="2" selected>2</option><option value="3" selected>3</option><option value="4" selected>4</option>')
                 }else if(val == '2'){
                   $('#guest').html('<option value="1" selected>1</option><option value="2" selected>2</option><option value="3" selected>3</option><option value="4" selected>4</option><option value="5" selected>5</option><option value="6" selected>6</option><option value="7" selected>7</option><option value="8" selected>8</option>')
                 }else if(val == '3'){
                   $('#guest').html('<option value="1" selected>1</option><option value="2" selected>2</option><option value="3" selected>3</option><option value="4" selected>4</option><option value="5" selected>5</option><option value="6" selected>6</option><option value="7" selected>7</option><option value="8" selected>8</option><option value="9" selected>9</option><option value="10" selected>10</option><option value="11" selected>11</option><option value="12" selected>12</option>')
                 }else if(val == '4'){
                   $('#guest').html('<option value="1" selected>1</option><option value="2" selected>2</option><option value="3" selected>3</option><option value="4" selected>4</option><option value="5" selected>5</option><option value="6" selected>6</option><option value="7" selected>7</option><option value="8" selected>8</option><option value="9" selected>9</option><option value="10" selected>10</option><option value="11" selected>11</option><option value="12" selected>12</option><option value="13" selected>13</option><option value="14" selected>14</option><option value="15" selected>15</option><option value="16" selected>16</option>')
                 }else{
                  $('#guest').html('<option value="0" selected>choose room</option>')
                 }
               })
             })
           </script>
           <script>
            // When the user scrolls down 20px from the top of the document, show the button
            window.onscroll = function () {
              scrollFunction()
            };
          
            function scrollFunction() {
              if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                document.getElementById("movetop").style.display = "block";
              } else {
                document.getElementById("movetop").style.display = "none";
              }
            }
          
            // When the user clicks on the button, scroll to the top of the document
            function topFunction() {
              document.body.scrollTop = 0;
              document.documentElement.scrollTop = 0;
            }
          </script>
           <script>
             $(function(){
               var dtToday = new Date();
               
               var month = dtToday.getMonth() + 1;
               var day = dtToday.getDate();
               var year = dtToday.getFullYear();
               if(month < 10)
                   month = '0' + month.toString();
               if(day < 10)
                   day = '0' + day.toString();
               
               var maxDate = year + '-' + month + '-' + day;
               $('#check_in').attr('min', maxDate);
               });
               function check_out_date(){
                $('#room').val('0')
                $('#check_out').val('')
                var check_in_date = $('#check_in').val()
                var date = new Date(check_in_date)
                var month = date.getMonth() +1;
                var day = date.getDate() +1;
                var year = date.getFullYear();
                if(month < 10)
                    month = '0' + month.toString();
                if(day < 10)
                    day = '0' + day.toString();
                
                var maxDate = year + '-' + month + '-' + day;
                $('#check_out').attr('min', maxDate);
              }
           </script>
           <!-- Template JavaScript -->
           <!-- <script src="{% static 'assets/js/jquery-3.3.1.min.js'%}"></script> -->
           
           <!-- <script src="{% static 'assets/js/owl.carousel.js'%}"></script> -->
           
           <!-- script for banner slider-->
           <script>
             $(document).ready(function () {
               $('.owl-one').owlCarousel({
                 loop: true,
                 margin: 0,
                 nav: false,
                 responsiveClass: true,
                 autoplay: false,
                 autoplayTimeout: 5000,
                 autoplaySpeed: 1000,
                 autoplayHoverPause: false,
                 responsive: {
                   0: {
                     items: 1,
                     nav: false
                   },
                   480: {
                     items: 1,
                     nav: false
                   },
                   667: {
                     items: 1,
                     nav: true
                   },
                   1000: {
                     items: 1,
                     nav: true
                   }
                 }
               })
             })
           </script>
           <!-- //script -->
           
           <!-- script for owlcarousel -->
           <script>
             $(document).ready(function () {
               $('.owl-testimonial').owlCarousel({
                 loop: true,
                 margin: 0,
                 nav: true,
                 responsiveClass: true,
                 autoplay: false,
                 autoplayTimeout: 5000,
                 autoplaySpeed: 1000,
                 autoplayHoverPause: false,
                 responsive: {
                   0: {
                     items: 1,
                     nav: false
                   },
                   480: {
                     items: 1,
                     nav: false
                   },
                   667: {
                     items: 1,
                     nav: true
                   },
                   1000: {
                     items: 1,
                     nav: true
                   }
                 }
               })
             })
           </script>
           <!-- //script for owlcarousel -->
           <!-- <script src="{% static 'assets/js/jquery.magnific-popup.min.js'%}"></script> -->
           <script>
             $(document).ready(function () {
               $('.popup-with-zoom-anim').magnificPopup({
                 type: 'inline',
           
                 fixedContentPos: false,
                 fixedBgPos: true,
           
                 overflowY: 'auto',
           
                 closeBtnInside: true,
                 preloader: false,
           
                 midClick: true,
                 removalDelay: 300,
                 mainClass: 'my-mfp-zoom-in'
               });
           
               $('.popup-with-move-anim').magnificPopup({
                 type: 'inline',
           
                 fixedContentPos: false,
                 fixedBgPos: true,
           
                 overflowY: 'auto',
           
                 closeBtnInside: true,
                 preloader: false,
           
                 midClick: true,
                 removalDelay: 300,
                 mainClass: 'my-mfp-slide-bottom'
               });
             });
           </script>
           
           
           <!-- disable body scroll which navbar is in active -->
           <script>
           $(function () {
             $('.navbar-toggler').click(function () {
               $('body').toggleClass('noscroll');
             })
           });
           </script>
           <!-- disable body scroll which navbar is in active -->
           
           <script src="{% static 'assets/js/bootstrap.min.js'%}"></script>

{% endblock %}
